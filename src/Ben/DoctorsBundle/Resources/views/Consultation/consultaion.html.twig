<!DOCTYPE html>
<!--
         ===================================================================
        ||          designed & developed by embaya.majed@gmail.com          ||
         ===================================================================
-->
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="application-name" content="doctors"/>
    <meta name="author" content="embaya.majed@gmail.com">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <link href="{{ absolute_url(asset('bootstrap/css/bootstrap.css')) }}" rel="stylesheet">
    <link href="{{ absolute_url(asset('css/layout.css')) }}" rel="stylesheet">
    <link href="{{ absolute_url(asset('css/main.css')) }}" rel="stylesheet">
    <link href="{{ absolute_url(asset('css/select2.css')) }}" rel="stylesheet">
    <style>{{ app_config.app_css }}</style>
</head>
<body class="theme1">

<div class="visible-print col-md-12 text-left"><img src="{{ absolute_url(asset( 'images/emedical_logo.png' )) }}" alt="logo"/></div>
<section class="wrap">
    <header id="adminbar">
        <div id="logo"><img src="{{ asset( app_config.app_logo ) }}" alt="logo" class="img-small"/>
            <span>{{ app_config.app_name }}</span></div>

        <h3>
            <span class="glyphicon glyphicon-tag"></span> {{ entity.isSpecial ? 'Orientation vers une consultation spécialisée' : 'Consultation médicale générale ' }}
        </h3>
        <div id="mycontainer" class="row">
            <div class="col-md-10">
                <table class="table table-striped table-hover table-bordered">
                    <tbody>
                    {% if entity.isSpecial %}
                        <tr>
                            <th>Infrastructure sanitaire de reference</th>
                            <td>{{ entity.infrastructure }}</td>
                        </tr>
                        <tr>
                            <th>Specialité</th>
                            <td>{{ entity.name }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <th>Motif</th>
                            <td>{{ entity.name }}</td>
                        </tr>
                    {% endif %}
                    <tr>
                        <th>Patient</th>
                        <td>
                            <a href="{{ path('person_show', { 'id': entity.person.id }) }}">{{ entity.person.fullname }}</a>
                        </td>
                    </tr>
                    <tr>
                        <th>Medecin</th>
                        <td>{{ entity.user.fullname }}</td>
                    </tr>
                    <tr>
                        <th>Type de consultation</th>
                        <td>{{ entity.type }}</td>
                    </tr>
                    <tr>
                        <th>Date de consultation</th>
                        <td>{{ entity.created|date('m/d/Y') }}</td>
                    </tr>
                    <tr>
                        <th>Diagnostic</th>
                        <td>
                            <ul>
                                {% for item in entity.diagnosis|split(',') %}
                                    <li>{{ item }}</li>
                                {% endfor %}
                            </ul>
                        </td>
                    </tr>
                    {% if not entity.isSpecial %}
                        <tr>
                            <th>Décision prise</th>
                            <td>{{ entity.decision|nl2br }}</td>
                        </tr>
                        <tr>
                            <th>Maladie chronique</th>
                            <td>{{ entity.chronic ? 'Oui' : 'Non' }}</td>
                        </tr>
                    {% endif %}
                    <tr>
                        <th>Traitement</th>
                        <td>
                            <button class="btn btn-sm btn-default pull-right print-only-this"><span
                                        class="glyphicon glyphicon-print"></span></button>
                            <p>{{ entity.treatment|nl2br }}</p>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <div class="row">
                    {% if not entity.isSpecial %}
                        <div class="col-md-7">
                            <h3>Liste des exameins effectuées
                                <span class="btn-group pull-right">
                  <button class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-plus"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="{{ path('test_new', { 'id': entity.id }) }}"> Ajouter un examen </a></li>
                    <li><a href="{{ path('test_new', { 'id': entity.id, 'type': 1 }) }}"> Ajouter un examen général</a></li>
                  </ul>
                </span>
                            </h3>

                            {% for entity in entity.tests %}
                                <table class="table table-striped table-hover table-bordered">
                                    <thead>
                                    <tr>
                                        <th colspan="2" class="text-center"><a
                                                    href="{{ path('test_edit', { 'id': entity.id }) }}">{{ entity.type }}</a>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% if entity.isGeneral %}
                                        <tr>
                                            <th style="width: 150px;">Taille</th>
                                            <td>{{ entity.taille }}</td>
                                        </tr>
                                        <tr>
                                            <th>Poids</th>
                                            <td>{{ entity.poids }}</td>
                                        </tr>
                                        <tr>
                                            <th>TA</th>
                                            <td>{{ entity.ta }}</td>
                                        </tr>
                                        <tr>
                                            <th>Acuité visuelle - OD</th>
                                            <td>{{ entity.od }}</td>
                                        </tr>
                                        <tr>
                                            <th>Acuité visuelle - OG</th>
                                            <td>{{ entity.og }}</td>
                                        </tr>
                                        <tr>
                                            <th>Trouble visuel</th>
                                            <td>{{ entity.hasvisualissue ? entity.fixedvisualissue : 'Non' }}</td>
                                        </tr>
                                    {% else %}
                                        <tr>
                                            <th>Demande</th>
                                            <td>
                                                <button class="btn btn-sm btn-default pull-right print-only-this"><span
                                                            class="glyphicon glyphicon-print"></span></button>
                                                <p>{{ entity.request|nl2br }}</p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Resultats</th>
                                            <td>
                                                <button class="btn btn-sm btn-default pull-right print-only-this"><span
                                                            class="glyphicon glyphicon-print"></span></button>
                                                <p>{{ entity.result|nl2br }}</p>
                                            </td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            {% endfor %}
                        </div>
                    {% endif %}
                    <div class="col-md-5">
                        <h3>Médicaments délivrées <a class="btn btn-info btn-sm pull-right"
                                                     href="{{ path('consultation_edit', { 'id': entity.id }) }}"> <span
                                        class="glyphicon glyphicon-plus"></span></a></h3>

                        <table class="table table-striped table-hover table-bordered">
                            <tr>
                                <th>Médicament</th>
                                <th>Nombre d'unités</th>
                            </tr>
                            {% for item in entity.consultationmeds %}
                                <tr>
                                    <td>{{ item.meds.name }}</td>
                                    <td>{{ item.count }}</td>
                                </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </header>
</section>
</body>
</html>
